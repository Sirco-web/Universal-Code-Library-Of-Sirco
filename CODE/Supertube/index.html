<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>SuperTube</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="styles.css">
<script>
  function checkCookie() {
    const cookies = document.cookie.split("; ").map(c => c.trim());
    const accessCookie = cookies.find(c => c.startsWith("access="));
    const accessValue = accessCookie ? accessCookie.split("=")[1] : null;

    if (accessValue !== "1") {
      // Replace everything with only the iframe
      document.documentElement.innerHTML = `
        <head>
          <title>Access Denied</title>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
        </head>
        <body style="margin:0;overflow:hidden;">
          <iframe src="/404.html"
                  style="position:fixed;top:0;left:0;width:100vw;height:100vh;
                         border:none;z-index:9999;"></iframe>
        </body>
      `;
      return; // stop further code if cookie invalid
    }
  }

  // Run immediately
  checkCookie();

  // Random interval between 10‚Äì25 seconds
  function scheduleNextCheck() {
    const next = Math.floor(Math.random() * (25000 - 10000 + 1)) + 10000;
    setTimeout(() => {
      checkCookie();
      scheduleNextCheck();
    }, next);
  }

  scheduleNextCheck();
</script>

</head>
<body>
<header>
  <div id="logo" class="logo"></div>
  <div class="searchbar">
    <input id="q" type="search" placeholder="Search or paste YouTube URL / ID">
    <button id="btnSearch">üîç</button>
  </div>
  <select id="region">
    <option value="US" selected>US</option><option value="GB">UK</option><option value="CA">Canada</option>
    <option value="AU">Australia</option><option value="IN">India</option><option value="JP">Japan</option>
  </select>
  <button class="btn" id="btnTrending">Trending</button>
</header>

<main>
  <section class="player">
    <iframe id="player" allowfullscreen></iframe>
    <div class="meta">
      <div id="nowTitle" class="title">Pick a video</div>
      <div id="nowChannel" class="channel"></div>
    </div>
  </section>

  <section>
    <div class="grid" id="grid"></div>
    <div class="pagination">
      <button id="prev" disabled>Prev</button>
      <button id="next" disabled>Next</button>
    </div>
  </section>
</main>

<script src="script.js" defer></script>
</body>
</html>